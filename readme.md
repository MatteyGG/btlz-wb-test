#  –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç lucard17

–°–µ—Ä–≤–∏—Å **¬´–Ω–∞—Å—Ç—Ä–æ–∏–ª –∏ –∑–∞–±—ã–ª¬ª** –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API Wildberries –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Ö –≤ PostgreSQL.  
–°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ Google Sheets API, –∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram.
<details>
  <summary>–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ</summary>
–ò—Å—Ö–æ–¥—è –∏–∑ –¢–ó —è —Ä–µ—à–∏–ª, —á—Ç–æ –Ω–∞–ø–∏—à—É —Å–µ—Ä–≤–∏—Å "–Ω–∞—Å—Ç—Ä–æ–∏–ª –∏ –∑–∞–±—ã–ª". 
–≠—Ç–æ —Å–±–æ—Ä—â–∏–∫ —Å API wildberries, —á—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—ã—Ä—ã–µ, –Ω–æ –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL(–ú–æ–∂–Ω–æ –¥–æ–ø–∏—Å–∞—Ç—å –ª—é–±–æ–π storage). 
–°–µ—Ä–≤–∏—Å —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –±—ã—Ç—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º. Fetch –Ω–∞–ø–∏—Å–∞–Ω —Å —Ä–µ—Ç—Ä–∞—è–º–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è 429.  Google sheets –≤—ã—Å—Ç—É–ø–∞–µ—Ç —Å–∫–æ—Ä–µ–µ —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. 
–ù–æ –¥–ª—è –º–µ–Ω—è –≤–∞–∂–Ω–æ, —á—Ç–æ–± —Å–µ—Ä–≤–∏—Å –º–æ–≥ –ø–æ–∑–≤–∞—Ç—å –Ω–∞ –ø–æ–º–æ—â—å –ø–æ—ç—Ç–æ–º—É –µ—Å—Ç—å –º–æ–¥—É–ª—å telegram_notify, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –æ—à–∏–±–∫–∏. 
</details>

**–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
- –†–µ—Ç—Ä–∞–π —Ç–æ–ª—å–∫–æ –ø—Ä–∏ HTTP 429.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–¥ –¥—Ä—É–≥–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/MatteyGG/btlz-wb-test
   cd btlz-wb-test
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   cp example.env .env
   ```

3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env`:
   ```env
   WB_API_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_WB

   GOOGLE_CLIENT_EMAIL=xxxx@iam.gserviceaccount.com
   GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
   GSHEETS_IDS=sheet_id_1,sheet_id_2

   TELEGRAM_BOT_TOKEN= # –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
   TELEGRAM_CHAT_ID= # –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
   ```

   üìò –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ Google-–∫–ª—é—á–µ–π –∏ ID —Ç–∞–±–ª–∏—Ü: [Google Sheets API Quickstart](https://developers.google.com/sheets/api/quickstart)

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é Docker:
   ```bash
   docker compose up --build -d
   ```

5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   docker compose logs
   ```

---


## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã

- **knex** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL  
- **googleapis** ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Google Sheets  
- **node-cron** ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á  
- **zod** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è  

## ‚öôÔ∏è –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

- –í `app.ts` –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è cron-–∑–∞–¥–∞—á–∏:
  - `get_and_update_database` ‚Äî –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Wildberries API –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –±–∞–∑—É.
  - `get_and_update_gsheet` ‚Äî —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç Google Sheets.
- –ö–ª—é—á–µ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
  - `wb-api.service.ts` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å API Wildberries.
  - `warehouse.database.service.ts` ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å PostgreSQL.
  - `gsheets-api.service.ts` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Google Sheets.
  - `telegram_notify` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —á–µ—Ä–µ–∑ Telegram.
- –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `tariffs.module.ts`.

---

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ Docker:
```bash
npm install
npm run dev
```

## ü™™ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–π—Ç–µ.
